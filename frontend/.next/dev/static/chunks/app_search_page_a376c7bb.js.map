{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/Graphnous/frontend/app/search/page.js"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, Suspense } from 'react';\r\nimport { useSearchParams } from 'next/navigation';\r\nimport Link from 'next/link';\r\n\r\nfunction SearchContent() {\r\n    const searchParams = useSearchParams();\r\n    const initialQ = searchParams.get('q') || '';\r\n    const [query, setQuery] = useState(initialQ);\r\n    const [results, setResults] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [searched, setSearched] = useState(false);\r\n\r\n    const doSearch = async (q) => {\r\n        if (!q.trim()) return;\r\n        setLoading(true);\r\n        setSearched(true);\r\n        try {\r\n            const res = await fetch(`/api/search?q=${encodeURIComponent(q)}`);\r\n            const data = await res.json();\r\n            setResults(data);\r\n        } catch {\r\n            setResults([]);\r\n        }\r\n        setLoading(false);\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (initialQ) doSearch(initialQ);\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"animate-fade-in\" style={{ maxWidth: 800, margin: '0 auto' }}>\r\n            <div className=\"page-header\">\r\n                <h2>Search</h2>\r\n                <p>Ask the organization ‚Äî find decisions, assumptions, and evidence</p>\r\n            </div>\r\n\r\n            {/* Search Input */}\r\n            <div style={{ position: 'relative', marginBottom: 'var(--space-xl)' }}>\r\n                <svg\r\n                    xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\"\r\n                    stroke=\"currentColor\" strokeWidth=\"2\"\r\n                    style={{ position: 'absolute', left: 18, top: '50%', transform: 'translateY(-50%)', width: 20, height: 20, color: 'var(--text-muted)' }}\r\n                >\r\n                    <circle cx=\"11\" cy=\"11\" r=\"8\" /><path d=\"M21 21l-4.35-4.35\" />\r\n                </svg>\r\n                <input\r\n                    className=\"form-input search-page-input\"\r\n                    placeholder=\"e.g., 'why vendor x', 'assumption headcount stable', 'policy data retention'\"\r\n                    value={query}\r\n                    onChange={e => setQuery(e.target.value)}\r\n                    onKeyDown={e => { if (e.key === 'Enter') doSearch(query); }}\r\n                    autoFocus\r\n                />\r\n            </div>\r\n\r\n            {/* Example Queries */}\r\n            {!searched && (\r\n                <div className=\"card\" style={{ marginBottom: 'var(--space-lg)' }}>\r\n                    <h3 style={{ fontSize: 14, fontWeight: 600, marginBottom: 'var(--space-md)' }}>Try asking</h3>\r\n                    <div style={{ display: 'flex', flexWrap: 'wrap', gap: 'var(--space-sm)' }}>\r\n                        {[\r\n                            'why vendor',\r\n                            'assumption headcount',\r\n                            'policy data retention',\r\n                            'compliance',\r\n                            'zero trust',\r\n                            'postmortem',\r\n                        ].map(q => (\r\n                            <button\r\n                                key={q}\r\n                                className=\"domain-tab\"\r\n                                onClick={() => { setQuery(q); doSearch(q); }}\r\n                            >\r\n                                \"{q}\"\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Loading */}\r\n            {loading && (\r\n                <div className=\"empty-state\">\r\n                    <div className=\"empty-state-icon\" style={{ animation: 'pulse 1.5s infinite' }}>‚åï</div>\r\n                    <h3>Searching‚Ä¶</h3>\r\n                </div>\r\n            )}\r\n\r\n            {/* Results */}\r\n            {!loading && searched && (\r\n                <div>\r\n                    <div style={{ fontSize: 13, color: 'var(--text-muted)', marginBottom: 'var(--space-md)' }}>\r\n                        {results.length} result{results.length !== 1 ? 's' : ''} for \"{query}\"\r\n                    </div>\r\n                    <div className=\"decision-list stagger\">\r\n                        {results.length === 0 ? (\r\n                            <div className=\"empty-state\">\r\n                                <div className=\"empty-state-icon\">üîç</div>\r\n                                <h3>No results found</h3>\r\n                                <p>Try different keywords or browse decisions</p>\r\n                            </div>\r\n                        ) : (\r\n                            results.map((r) => (\r\n                                <Link key={r.id} href={`/decisions/${r.id}`} style={{ textDecoration: 'none', color: 'inherit' }}>\r\n                                    <div className=\"card card-clickable search-result animate-fade-in\">\r\n                                        <div className=\"search-result-title\">\r\n                                            <span style={{ fontFamily: \"'JetBrains Mono', monospace\", fontSize: 11, color: 'var(--accent-primary)', marginRight: 8 }}>{r.id}</span>\r\n                                            {r.title}\r\n                                        </div>\r\n                                        <div className=\"decision-card-meta\" style={{ marginBottom: 'var(--space-sm)' }}>\r\n                                            <span>{r.owner}</span>\r\n                                            <span>¬∑</span>\r\n                                            <span>{r.date}</span>\r\n                                        </div>\r\n                                        {(r.top_rationale || r.top_assumption) && (\r\n                                            <div className=\"search-result-why\">\r\n                                                {r.top_rationale && <div><strong>Rationale:</strong> {r.top_rationale}</div>}\r\n                                                {r.top_assumption && <div style={{ marginTop: r.top_rationale ? 4 : 0 }}><strong>Assumption:</strong> {r.top_assumption}</div>}\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </Link>\r\n                            ))\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default function SearchPage() {\r\n    return (\r\n        <Suspense fallback={<div className=\"empty-state\"><h3>Loading‚Ä¶</h3></div>}>\r\n            <SearchContent />\r\n        </Suspense>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}