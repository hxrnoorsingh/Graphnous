{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/Graphnous/frontend/app/drift/page.js"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport Link from 'next/link';\r\n\r\nexport default function DriftPage() {\r\n    const [queue, setQueue] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [filter, setFilter] = useState('all'); // all | critical | warning | info\r\n\r\n    useEffect(() => {\r\n        fetch('/api/drift/review-queue')\r\n            .then(r => r.json())\r\n            .then(data => { setQueue(data); setLoading(false); })\r\n            .catch(() => setLoading(false));\r\n    }, []);\r\n\r\n    const filteredQueue = filter === 'all' ? queue : queue.filter(i => i.severity === filter);\r\n\r\n    const counts = {\r\n        all: queue.length,\r\n        critical: queue.filter(i => i.severity === 'critical').length,\r\n        warning: queue.filter(i => i.severity === 'warning').length,\r\n        info: queue.filter(i => i.severity === 'info').length,\r\n    };\r\n\r\n    if (loading) {\r\n        return <div className=\"empty-state\"><div className=\"empty-state-icon\" style={{ animation: 'pulse 1.5s infinite' }}>⚡</div><h3>Loading review queue…</h3></div>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"animate-fade-in\">\r\n            <div className=\"page-header\">\r\n                <h2>Drift & Reviews</h2>\r\n                <p>Organizational forgetting detector — what needs revisiting and why</p>\r\n            </div>\r\n\r\n            {/* Severity stats */}\r\n            <div className=\"stat-grid stagger\" style={{ marginBottom: 'var(--space-lg)' }}>\r\n                <div className=\"card stat-card accent-rose animate-fade-in\" style={{ cursor: 'pointer' }} onClick={() => setFilter('critical')}>\r\n                    <div className=\"stat-label\">Critical</div>\r\n                    <div className=\"stat-value\">{counts.critical}</div>\r\n                    <div className=\"stat-sub\">Broken or expired assumptions</div>\r\n                </div>\r\n                <div className=\"card stat-card accent-amber animate-fade-in\" style={{ cursor: 'pointer' }} onClick={() => setFilter('warning')}>\r\n                    <div className=\"stat-label\">Warning</div>\r\n                    <div className=\"stat-value\">{counts.warning}</div>\r\n                    <div className=\"stat-sub\">Aging or expiring soon</div>\r\n                </div>\r\n                <div className=\"card stat-card accent-teal animate-fade-in\" style={{ cursor: 'pointer' }} onClick={() => setFilter('info')}>\r\n                    <div className=\"stat-label\">Info</div>\r\n                    <div className=\"stat-value\">{counts.info}</div>\r\n                    <div className=\"stat-sub\">Low confidence decisions</div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Filter Tabs */}\r\n            <div className=\"domain-tabs\" style={{ marginBottom: 'var(--space-lg)' }}>\r\n                {['all', 'critical', 'warning', 'info'].map(f => (\r\n                    <button\r\n                        key={f}\r\n                        className={`domain-tab ${filter === f ? 'active' : ''}`}\r\n                        onClick={() => setFilter(f)}\r\n                    >\r\n                        {f === 'all' ? `All (${counts.all})` : `${f} (${counts[f]})`}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Queue */}\r\n            <div className=\"decision-list stagger\">\r\n                {filteredQueue.length === 0 ? (\r\n                    <div className=\"card\">\r\n                        <div className=\"empty-state\">\r\n                            <div className=\"empty-state-icon\">✓</div>\r\n                            <h3>All clear</h3>\r\n                            <p>No {filter !== 'all' ? filter : ''} items need review</p>\r\n                        </div>\r\n                    </div>\r\n                ) : (\r\n                    filteredQueue.map((item, i) => (\r\n                        <div key={i} className=\"card review-card animate-fade-in\" style={{ padding: 0 }}>\r\n                            <div className={`review-severity-bar ${item.severity}`} />\r\n                            <div className=\"review-content\" style={{ padding: 'var(--space-md) var(--space-lg) var(--space-md) 0' }}>\r\n                                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: 'var(--space-sm)' }}>\r\n                                    <div>\r\n                                        <Link href={`/decisions/${item.decision_id}`} className=\"review-decision-link\">\r\n                                            {item.decision_id}\r\n                                        </Link>\r\n                                        <div style={{ fontSize: 14, fontWeight: 600, color: 'var(--text-primary)', marginBottom: 4 }}>\r\n                                            {item.decision_question}\r\n                                        </div>\r\n                                    </div>\r\n                                    <span className={`badge badge-${item.severity === 'critical' ? 'broken' : item.severity === 'warning' ? 'aging' : 'info'}`}>\r\n                                        {item.severity}\r\n                                    </span>\r\n                                </div>\r\n\r\n                                <div className=\"review-reason\">\r\n                                    {item.reason}\r\n                                </div>\r\n\r\n                                <div className=\"review-actions\" style={{ marginTop: 'var(--space-md)' }}>\r\n                                    <Link href={`/decisions/${item.decision_id}`} className=\"btn btn-secondary btn-sm\">\r\n                                        Review Decision\r\n                                    </Link>\r\n                                    <Link href={`/graph?focus=${item.decision_id}`} className=\"btn btn-ghost btn-sm\">\r\n                                        View in Graph\r\n                                    </Link>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ))\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAKe,SAAS;;IACpB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC,EAAE;IACrC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC,QAAQ,kCAAkC;IAE/E,IAAA,0KAAS;+BAAC;YACN,MAAM,2BACD,IAAI;uCAAC,CAAA,IAAK,EAAE,IAAI;sCAChB,IAAI;uCAAC,CAAA;oBAAU,SAAS;oBAAO,WAAW;gBAAQ;sCAClD,KAAK;uCAAC,IAAM,WAAW;;QAChC;8BAAG,EAAE;IAEL,MAAM,gBAAgB,WAAW,QAAQ,QAAQ,MAAM,MAAM,CAAC,CAAA,IAAK,EAAE,QAAQ,KAAK;IAElF,MAAM,SAAS;QACX,KAAK,MAAM,MAAM;QACjB,UAAU,MAAM,MAAM,CAAC,CAAA,IAAK,EAAE,QAAQ,KAAK,YAAY,MAAM;QAC7D,SAAS,MAAM,MAAM,CAAC,CAAA,IAAK,EAAE,QAAQ,KAAK,WAAW,MAAM;QAC3D,MAAM,MAAM,MAAM,CAAC,CAAA,IAAK,EAAE,QAAQ,KAAK,QAAQ,MAAM;IACzD;IAEA,IAAI,SAAS;QACT,qBAAO,6LAAC;YAAI,WAAU;;8BAAc,6LAAC;oBAAI,WAAU;oBAAmB,OAAO;wBAAE,WAAW;oBAAsB;8BAAG;;;;;;8BAAO,6LAAC;8BAAG;;;;;;;;;;;;IAClI;IAEA,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;kCAAG;;;;;;kCACJ,6LAAC;kCAAE;;;;;;;;;;;;0BAIP,6LAAC;gBAAI,WAAU;gBAAoB,OAAO;oBAAE,cAAc;gBAAkB;;kCACxE,6LAAC;wBAAI,WAAU;wBAA6C,OAAO;4BAAE,QAAQ;wBAAU;wBAAG,SAAS,IAAM,UAAU;;0CAC/G,6LAAC;gCAAI,WAAU;0CAAa;;;;;;0CAC5B,6LAAC;gCAAI,WAAU;0CAAc,OAAO,QAAQ;;;;;;0CAC5C,6LAAC;gCAAI,WAAU;0CAAW;;;;;;;;;;;;kCAE9B,6LAAC;wBAAI,WAAU;wBAA8C,OAAO;4BAAE,QAAQ;wBAAU;wBAAG,SAAS,IAAM,UAAU;;0CAChH,6LAAC;gCAAI,WAAU;0CAAa;;;;;;0CAC5B,6LAAC;gCAAI,WAAU;0CAAc,OAAO,OAAO;;;;;;0CAC3C,6LAAC;gCAAI,WAAU;0CAAW;;;;;;;;;;;;kCAE9B,6LAAC;wBAAI,WAAU;wBAA6C,OAAO;4BAAE,QAAQ;wBAAU;wBAAG,SAAS,IAAM,UAAU;;0CAC/G,6LAAC;gCAAI,WAAU;0CAAa;;;;;;0CAC5B,6LAAC;gCAAI,WAAU;0CAAc,OAAO,IAAI;;;;;;0CACxC,6LAAC;gCAAI,WAAU;0CAAW;;;;;;;;;;;;;;;;;;0BAKlC,6LAAC;gBAAI,WAAU;gBAAc,OAAO;oBAAE,cAAc;gBAAkB;0BACjE;oBAAC;oBAAO;oBAAY;oBAAW;iBAAO,CAAC,GAAG,CAAC,CAAA,kBACxC,6LAAC;wBAEG,WAAW,CAAC,WAAW,EAAE,WAAW,IAAI,WAAW,IAAI;wBACvD,SAAS,IAAM,UAAU;kCAExB,MAAM,QAAQ,CAAC,KAAK,EAAE,OAAO,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,EAAE,EAAE,EAAE,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC;uBAJvD;;;;;;;;;;0BAUjB,6LAAC;gBAAI,WAAU;0BACV,cAAc,MAAM,KAAK,kBACtB,6LAAC;oBAAI,WAAU;8BACX,cAAA,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAI,WAAU;0CAAmB;;;;;;0CAClC,6LAAC;0CAAG;;;;;;0CACJ,6LAAC;;oCAAE;oCAAI,WAAW,QAAQ,SAAS;oCAAG;;;;;;;;;;;;;;;;;2BAI9C,cAAc,GAAG,CAAC,CAAC,MAAM,kBACrB,6LAAC;wBAAY,WAAU;wBAAmC,OAAO;4BAAE,SAAS;wBAAE;;0CAC1E,6LAAC;gCAAI,WAAW,CAAC,oBAAoB,EAAE,KAAK,QAAQ,EAAE;;;;;;0CACtD,6LAAC;gCAAI,WAAU;gCAAiB,OAAO;oCAAE,SAAS;gCAAoD;;kDAClG,6LAAC;wCAAI,OAAO;4CAAE,SAAS;4CAAQ,gBAAgB;4CAAiB,YAAY;4CAAc,cAAc;wCAAkB;;0DACtH,6LAAC;;kEACG,6LAAC,0KAAI;wDAAC,MAAM,CAAC,WAAW,EAAE,KAAK,WAAW,EAAE;wDAAE,WAAU;kEACnD,KAAK,WAAW;;;;;;kEAErB,6LAAC;wDAAI,OAAO;4DAAE,UAAU;4DAAI,YAAY;4DAAK,OAAO;4DAAuB,cAAc;wDAAE;kEACtF,KAAK,iBAAiB;;;;;;;;;;;;0DAG/B,6LAAC;gDAAK,WAAW,CAAC,YAAY,EAAE,KAAK,QAAQ,KAAK,aAAa,WAAW,KAAK,QAAQ,KAAK,YAAY,UAAU,QAAQ;0DACrH,KAAK,QAAQ;;;;;;;;;;;;kDAItB,6LAAC;wCAAI,WAAU;kDACV,KAAK,MAAM;;;;;;kDAGhB,6LAAC;wCAAI,WAAU;wCAAiB,OAAO;4CAAE,WAAW;wCAAkB;;0DAClE,6LAAC,0KAAI;gDAAC,MAAM,CAAC,WAAW,EAAE,KAAK,WAAW,EAAE;gDAAE,WAAU;0DAA2B;;;;;;0DAGnF,6LAAC,0KAAI;gDAAC,MAAM,CAAC,aAAa,EAAE,KAAK,WAAW,EAAE;gDAAE,WAAU;0DAAuB;;;;;;;;;;;;;;;;;;;uBAzBnF;;;;;;;;;;;;;;;;AAoClC;GAhHwB;KAAA"}}]
}