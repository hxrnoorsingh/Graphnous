{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/Graphnous/frontend/app/graph/page.js"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, useRef, useCallback } from 'react';\r\n\r\nconst NODE_COLORS = {\r\n    decision: '#6366f1',\r\n    assumption: '#10b981',\r\n    evidence: '#f59e0b',\r\n    signal: '#f43f5e',\r\n    policy: '#14b8a6',\r\n};\r\n\r\nconst NODE_RADIUS = {\r\n    decision: 28,\r\n    assumption: 20,\r\n    evidence: 18,\r\n    signal: 22,\r\n    policy: 22,\r\n};\r\n\r\nconst EDGE_LABELS = {\r\n    depends_on: 'depends on',\r\n    justified_by: 'justified by',\r\n    derived_into: 'derived into',\r\n    invalidated_by: 'invalidated by',\r\n    related_to: 'related to',\r\n};\r\n\r\nexport default function GraphPage() {\r\n    const canvasRef = useRef(null);\r\n    // Use ref for mutable graph state to avoid React re-render cycles during animation\r\n    const graphRef = useRef({ nodes: [], edges: [] });\r\n    // Use state only for initial load detection and tooltips\r\n    const [loaded, setLoaded] = useState(false);\r\n    const [tooltip, setTooltip] = useState(null);\r\n\r\n    const animFrameRef = useRef(null);\r\n    const dragRef = useRef(null);\r\n    const panRef = useRef({ x: 0, y: 0 });\r\n    const scaleRef = useRef(1);\r\n\r\n    useEffect(() => {\r\n        fetch('/api/graph')\r\n            .then(r => r.json())\r\n            .then(data => {\r\n                // Initialize positions\r\n                const centerX = 600;\r\n                const centerY = 400;\r\n                const nodes = data.nodes.map((n, i) => ({\r\n                    ...n,\r\n                    x: centerX + Math.cos(i / data.nodes.length * Math.PI * 2) * (150 + Math.random() * 200),\r\n                    y: centerY + Math.sin(i / data.nodes.length * Math.PI * 2) * (150 + Math.random() * 200),\r\n                    vx: 0,\r\n                    vy: 0,\r\n                }));\r\n                graphRef.current = { nodes, edges: data.edges };\r\n                setLoaded(true);\r\n            })\r\n            .catch(() => { });\r\n    }, []);\r\n\r\n    const simulate = useCallback(() => {\r\n        const { nodes, edges } = graphRef.current;\r\n        if (nodes.length === 0) return;\r\n\r\n        // Repulsion\r\n        for (let i = 0; i < nodes.length; i++) {\r\n            for (let j = i + 1; j < nodes.length; j++) {\r\n                const dx = nodes[j].x - nodes[i].x;\r\n                const dy = nodes[j].y - nodes[i].y;\r\n                const dist = Math.sqrt(dx * dx + dy * dy) || 1;\r\n                if (dist > 500) continue; // Optimization\r\n                const force = 2000 / (dist * dist);\r\n                const fx = (dx / dist) * force;\r\n                const fy = (dy / dist) * force;\r\n                nodes[i].vx -= fx;\r\n                nodes[i].vy -= fy;\r\n                nodes[j].vx += fx;\r\n                nodes[j].vy += fy;\r\n            }\r\n        }\r\n\r\n        // Edge springs\r\n        const nodeMap = {};\r\n        nodes.forEach(n => nodeMap[n.id] = n);\r\n        edges.forEach(e => {\r\n            const source = nodeMap[e.source];\r\n            const target = nodeMap[e.target];\r\n            if (!source || !target) return;\r\n            const dx = target.x - source.x;\r\n            const dy = target.y - source.y;\r\n            const dist = Math.sqrt(dx * dx + dy * dy) || 1;\r\n            const force = (dist - 150) * 0.02; // Stiffer spring\r\n            const fx = (dx / dist) * force;\r\n            const fy = (dy / dist) * force;\r\n            source.vx += fx;\r\n            source.vy += fy;\r\n            target.vx -= fx;\r\n            target.vy -= fy;\r\n        });\r\n\r\n        // Center gravity\r\n        const cx = 600, cy = 400;\r\n        nodes.forEach(n => {\r\n            n.vx += (cx - n.x) * 0.005;\r\n            n.vy += (cy - n.y) * 0.005;\r\n        });\r\n\r\n        // Update positions\r\n        nodes.forEach(n => {\r\n            if (dragRef.current?.id === n.id) return;\r\n            n.vx *= 0.85; // Damping\r\n            n.vy *= 0.85;\r\n            n.x += n.vx;\r\n            n.y += n.vy;\r\n        });\r\n    }, []);\r\n\r\n    const draw = useCallback(() => {\r\n        const canvas = canvasRef.current;\r\n        if (!canvas) return;\r\n\r\n        // Handle resizing\r\n        const parent = canvas.parentElement;\r\n        if (parent) {\r\n            canvas.width = parent.clientWidth;\r\n            canvas.height = parent.clientHeight;\r\n        }\r\n\r\n        const ctx = canvas.getContext('2d');\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n        ctx.save();\r\n        ctx.translate(panRef.current.x, panRef.current.y);\r\n        ctx.scale(scaleRef.current, scaleRef.current);\r\n\r\n        const { nodes, edges } = graphRef.current;\r\n        const nodeMap = {};\r\n        nodes.forEach(n => nodeMap[n.id] = n);\r\n\r\n        // Draw edges\r\n        edges.forEach(e => {\r\n            const src = nodeMap[e.source];\r\n            const tgt = nodeMap[e.target];\r\n            if (!src || !tgt) return;\r\n\r\n            ctx.strokeStyle = 'rgba(255,255,255,0.08)';\r\n            ctx.lineWidth = 1.5;\r\n            ctx.beginPath();\r\n            ctx.moveTo(src.x, src.y);\r\n            ctx.lineTo(tgt.x, tgt.y);\r\n            ctx.stroke();\r\n\r\n            // Label\r\n            const mx = (src.x + tgt.x) / 2;\r\n            const my = (src.y + tgt.y) / 2;\r\n            ctx.fillStyle = 'rgba(255,255,255,0.2)';\r\n            ctx.font = '9px Inter';\r\n            ctx.textAlign = 'center';\r\n            ctx.fillText(EDGE_LABELS[e.type] || e.type, mx, my - 4);\r\n        });\r\n\r\n        // Draw nodes\r\n        nodes.forEach(n => {\r\n            const r = NODE_RADIUS[n.type] || 20;\r\n            const color = NODE_COLORS[n.type] || '#6366f1';\r\n\r\n            // Glow\r\n            ctx.shadowColor = color;\r\n            ctx.shadowBlur = 15;\r\n            ctx.fillStyle = color;\r\n            ctx.beginPath();\r\n            ctx.arc(n.x, n.y, r, 0, Math.PI * 2);\r\n            ctx.fill();\r\n            ctx.shadowBlur = 0;\r\n\r\n            // Header/Border\r\n            ctx.strokeStyle = 'rgba(255,255,255,0.3)';\r\n            ctx.lineWidth = 1;\r\n            ctx.stroke();\r\n\r\n            // Icon\r\n            ctx.fillStyle = 'white';\r\n            ctx.font = `bold ${r * 0.6}px Inter`;\r\n            ctx.textAlign = 'center';\r\n            ctx.textBaseline = 'middle';\r\n            const icon = n.type === 'decision' ? 'D' : n.type === 'assumption' ? 'A' : n.type === 'evidence' ? 'E' : n.type === 'signal' ? 'S' : 'P';\r\n            ctx.fillText(icon, n.x, n.y);\r\n\r\n            // Label\r\n            ctx.fillStyle = 'rgba(255,255,255,0.8)';\r\n            ctx.font = '10px Inter';\r\n            ctx.textAlign = 'center';\r\n            ctx.textBaseline = 'top';\r\n            const label = n.label?.length > 30 ? n.label.substring(0, 30) + '…' : n.label;\r\n            ctx.fillText(label || '', n.x, n.y + r + 6);\r\n        });\r\n\r\n        ctx.restore();\r\n    }, []);\r\n\r\n    // Animation Loop\r\n    useEffect(() => {\r\n        if (!loaded) return;\r\n\r\n        // Run simulation for a while then stop to save standard CPU, unless dragging\r\n        let frame = 0;\r\n        const loop = () => {\r\n            // Simulate for 300 frames (5s) or if dragging\r\n            if (frame < 300 || dragRef.current) {\r\n                simulate();\r\n            }\r\n            draw();\r\n            frame++;\r\n            animFrameRef.current = requestAnimationFrame(loop);\r\n        };\r\n        animFrameRef.current = requestAnimationFrame(loop);\r\n        return () => cancelAnimationFrame(animFrameRef.current);\r\n    }, [loaded, simulate, draw]);\r\n\r\n    const handleMouseDown = (e) => {\r\n        const rect = canvasRef.current.getBoundingClientRect();\r\n        const mx = (e.clientX - rect.left - panRef.current.x) / scaleRef.current;\r\n        const my = (e.clientY - rect.top - panRef.current.y) / scaleRef.current;\r\n\r\n        const node = graphRef.current.nodes.find(n => {\r\n            const r = NODE_RADIUS[n.type] || 20;\r\n            return Math.sqrt((n.x - mx) ** 2 + (n.y - my) ** 2) < r;\r\n        });\r\n\r\n        if (node) {\r\n            dragRef.current = { id: node.id, offsetX: mx - node.x, offsetY: my - node.y };\r\n        }\r\n    };\r\n\r\n    const handleMouseMove = (e) => {\r\n        const rect = canvasRef.current.getBoundingClientRect();\r\n        const mx = (e.clientX - rect.left - panRef.current.x) / scaleRef.current;\r\n        const my = (e.clientY - rect.top - panRef.current.y) / scaleRef.current;\r\n\r\n        if (dragRef.current) {\r\n            const node = graphRef.current.nodes.find(n => n.id === dragRef.current.id);\r\n            if (node) {\r\n                node.x = mx - dragRef.current.offsetX;\r\n                node.y = my - dragRef.current.offsetY;\r\n                node.vx = 0;\r\n                node.vy = 0;\r\n            }\r\n        } else {\r\n            const node = graphRef.current.nodes.find(n => {\r\n                const r = NODE_RADIUS[n.type] || 20;\r\n                return Math.sqrt((n.x - mx) ** 2 + (n.y - my) ** 2) < r;\r\n            });\r\n\r\n            if (node) {\r\n                setTooltip({\r\n                    x: e.clientX - rect.left + 15,\r\n                    y: e.clientY - rect.top + 15,\r\n                    node,\r\n                });\r\n            } else {\r\n                setTooltip(null);\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleMouseUp = () => {\r\n        dragRef.current = null;\r\n    };\r\n\r\n    const handleWheel = (e) => {\r\n        e.preventDefault();\r\n        const delta = e.deltaY > 0 ? 0.9 : 1.1;\r\n        scaleRef.current = Math.max(0.3, Math.min(3, scaleRef.current * delta));\r\n        // Simple re-draw after zoom\r\n        requestAnimationFrame(draw);\r\n    };\r\n\r\n    return (\r\n        <div className=\"animate-fade-in\">\r\n            <div className=\"page-header\">\r\n                <h2>Memory Graph</h2>\r\n                <p>How we think — explore decisions, assumptions, and evidence as a connected graph</p>\r\n            </div>\r\n\r\n            <div className=\"graph-container\">\r\n                <canvas\r\n                    ref={canvasRef}\r\n                    className=\"graph-canvas\"\r\n                    onMouseDown={handleMouseDown}\r\n                    onMouseMove={handleMouseMove}\r\n                    onMouseUp={handleMouseUp}\r\n                    onMouseLeave={() => { dragRef.current = null; setTooltip(null); }}\r\n                    onWheel={handleWheel}\r\n                    style={{ cursor: dragRef.current ? 'grabbing' : 'grab' }}\r\n                />\r\n\r\n                {/* Tooltip */}\r\n                {tooltip && (\r\n                    <div className=\"graph-tooltip\" style={{ left: tooltip.x, top: tooltip.y }}>\r\n                        <div style={{ fontWeight: 600, marginBottom: 4, color: NODE_COLORS[tooltip.node.type] }}>\r\n                            {tooltip.node.type.toUpperCase()}\r\n                        </div>\r\n                        <div style={{ marginBottom: 4 }}>{tooltip.node.label}</div>\r\n                        {tooltip.node.metadata && Object.entries(tooltip.node.metadata).map(([k, v]) => (\r\n                            v ? <div key={k} style={{ color: 'var(--text-muted)', fontSize: 11 }}>{k}: {String(v)}</div> : null\r\n                        ))}\r\n                    </div>\r\n                )}\r\n\r\n                {/* Legend */}\r\n                <div className=\"graph-legend\">\r\n                    {Object.entries(NODE_COLORS).map(([type, color]) => (\r\n                        <span key={type} style={{ display: 'flex', alignItems: 'center', gap: 4 }}>\r\n                            <span className=\"graph-legend-dot\" style={{ background: color }} />\r\n                            {type}\r\n                        </span>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}